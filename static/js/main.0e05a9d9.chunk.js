(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(58)},26:function(e,t,n){},31:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var o=n(2),c=n.n(o),r=n(17),u=n.n(r),i=(n(26),n(13)),a=(n(27),n(18)),f=n(19),s=n(20),l=n.n(s),p=n(63),d=n(61),h=n(62),m=new(function(){function e(){var t=this;Object(a.a)(this,e),this.noteUpdates=new p.a(null);this.componentManager=new l.a([{name:"stream-context-item"}],function(){}),this.componentManager.streamContextItem(function(e){t.noteUpdates.next(e)})}return Object(f.a)(e,[{key:"getNoteUpdates",value:function(){return this.noteUpdates.pipe(Object(d.a)(function(e){return e}))}},{key:"getNoteContentUpdates",value:function(){return this.getNoteUpdates().pipe(Object(h.a)(function(e){return e?e.content.text:null}))}},{key:"saveNoteContent",value:function(e,t){var n=this.noteUpdates.getValue();n&&(n.content.text=e,this.componentManager.saveItemWithPresave(n,function(){n.content.text=t()}))}},{key:"isMobileDevice",value:function(){return this.componentManager.isMobile}}]),e}()),g=(n(31),n(32));var b=function(e){var t=v(e),n=C(t,e)||"X",o=j(t,e),c=E(n,o,e),r=c.characterElement,u=c.lineElement,i=R(U(u,r),e);return{size:M(r),position:i}},v=function(e){return e.coordsChar(e.cursorCoords())},C=function(e,t){return t.getLine(e.line).charAt(e.ch)},j=function(e,t){return{line:O(e,t),ch:x(e,t)}},O=function(e,t){var n=t.display.renderedView[e.line];return n&&n.textClass||""},x=function(e,t){return t.getTokenTypeAt(e)},E=function(e,t,n){var o=y(e,t.character),c=w(o,t.line);return N(c,n),{characterElement:o,lineElement:c}},y=function(e,t){var n=document.createTextNode(e);return k("span",t,n)},w=function(e,t){return k("pre",t,e)},k=function(e,t,n){var o=document.createElement(e);return o.className=t,o.appendChild(n),o},N=function(e,t){var n=t.display.measure;D(n),n.appendChild(e)},D=function(e){for(;e.childNodes.length>0;)e.removeChild(e.firstChild)},M=function(e){var t=e.getBoundingClientRect();return{width:t.right-t.left,height:t.bottom-t.top}},U=function(e,t){var n=e.getBoundingClientRect(),o=t.getBoundingClientRect();return{left:o.left-n.left,top:o.top-n.top}},R=function(e,t){var n=t.cursorCoords(!0,"local");return{left:n.left+e.left,top:n.top+e.top}},V=function(e,t,n){if(t&&e&&n){try{n.deleteRule(0)}catch(o){}n.insertRule(".CodeMirror-cursor {\n         width: ".concat(t.width,"px !important;\n         height: ").concat(t.height+4,"px !important;\n         top: ").concat(e.top-4,"px !important;\n       }"),0)}};u.a.render(c.a.createElement(function(){var e=Object(o.useRef)(),t=Object(o.useState)(null),n=Object(i.a)(t,2),r=n[0],u=n[1],a=Object(o.useRef)(!1),f=Object(o.useState)(null),s=Object(i.a)(f,2),l=s[0],p=s[1],d=Object(o.useState)(null),h=Object(i.a)(d,2),v=h[0],C=h[1];Object(o.useEffect)(function(){p(g.fromTextArea(e.current,{keyMap:m.isMobileDevice()?"default":"vim",lineNumbers:!1}))},[e]),Object(o.useEffect)(function(){if(l){var e=m.getNoteUpdates().subscribe(function(e){(!r||r.uuid!==e.uuid)&&(l.getDoc().clearHistory(),l.getDoc().markClean()),u(e)});return function(){e.unsubscribe()}}},[l,r]),Object(o.useEffect)(function(){l&&r&&l.getDoc().isClean()&&l.getDoc().getValue()!==r.content.text&&(a.current=!0,l.getDoc().setValue(r.content.text),a.current=!1)},[l,r]);var j=Object(o.useCallback)(function(){a.current||m.saveNoteContent(l.getValue(),function(){return l.getDoc().markClean(),l.getDoc().getValue()})},[l,a]);Object(o.useEffect)(function(){if(l)return l.on("change",j),function(){l.off("change",j)}},[l,j]),Object(o.useEffect)(function(){var e=document.createElement("style");document.head.appendChild(e),C(e.sheet)},[]);var O=Object(o.useCallback)(function(){if(l){var e=b(l),t=e.size,n=e.position;V(n,t,v)}},[l,v]);return Object(o.useEffect)(function(){if(l)return l.on("cursorActivity",O),l.on("update",O),function(){l.off("cursorActivity",O),l.off("update",O)}},[l,O]),c.a.createElement("textarea",{ref:e})},null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.0e05a9d9.chunk.js.map